<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Style.css">
    <link rel="stylesheet" href="">
</head>

<body>
    <div class="main">
        <h1>Customer Interection Form</h1>
        <form action="#" method="post" name="frm" onsubmit="return checkData(event)">

            <div class="box">
                <label for="name">Attendee Name :</label>
                <input type="text" name="name" id="name" placeholder="Enter name..">
                <span id="nameErr" class="error"></span>
            </div>
            <div class="box">
                <label for="email">Email Address :</label>
                <input type="text" name="email" id="email" placeholder="Enter email..">
                <span id="emailErr" class="error"></span>
            </div>
            <div class="box">
                <label for="event">Event Atteded :</label>
                <select id="event" name="event">
                    <option></option>
                    <option>Webinar</option>
                    <option>Workshop</option>
                    <option>Meetup</option>
                </select>
                <span id="eventErr" class="error"></span>
            </div>
            <div class="box">
                <label for="rating">Rating :</label>
                <select id="rating" name="rating">
                    <option></option>
                    <option>*</option>
                    <option>* *</option>
                    <option>* * *</option>
                    <option>* * * *</option>
                    <option>* * * * *</option>
                </select>
                <span id="rateErr" class="error"></span>
            </div>
            <div class="box b5">
                <label for="comment">Comments :</label>
                <textarea name="comment" id="comment" rows="4" placeholder="Comment Write Here..."></textarea>
                <span id="commentErr" class="error"></span>
            </div>
            <button type="submit" id="btn">Submit</button>
            <button type="button" id="btn" onclick="viewRecords()">View Records</button>
        </form>
    </div>


    <script>

        const checkData = (e) => {
            e.preventDefault();
            let status = 0;
            document.getElementById("nameErr").innerHTML = ""
            document.getElementById("emailErr").innerHTML = ""
            document.getElementById("eventErr").innerHTML = ""
            document.getElementById("rateErr").innerHTML = ""
            document.getElementById("commentErr").innerHTML = ""

            let name = document.frm.name.value
            let email = document.frm.email.value
            let event = document.frm.event.value
            let rating = document.frm.rating.value
            let comment = document.frm.comment.value

            let namePtn = /[A-Za-z]$/
            if (name === '') {
                document.getElementById('nameErr').innerHTML = "Please enter name"
                status = 1
            } else if (name.length < 3) {
                document.getElementById('nameErr').innerHTML = "Minimum 3 Characters"
                status = 1
            } else if (!namePtn.test(name)) {
                document.getElementById('nameErr').innerHTML = "Only alphabets allowed"
                status = 1
            }

            let emailPtn = /^[A-Za-z0-9]+@[A-Za-z]+.[A-Za-z]{2,3}$/
            if (email === "") {
                document.getElementById('emailErr').innerHTML = "Please enter email"
                status = 1
            } else if (!emailPtn.test(email)) {
                document.getElementById('emailErr').innerHTML = "Invalid email"
                status = 1
            }

            if (event === '') {
                document.getElementById('eventErr').innerHTML = "Select event"
                status = 1
            }

            if (rating === '') {
                document.getElementById('rateErr').innerHTML = "Select rating"
                status = 1
            }

            if (comment === '') {
                document.getElementById('commentErr').innerHTML = "Enter comment"
                status = 1
            } else if (comment.length < 10) {
                document.getElementById('commentErr').innerHTML = "Minimum 10 characters"
                status = 1
            }



            if (status === 0) {
                setData();
                frm.reset();
            }
        }


        const setData = () => {
            const storeData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                event: document.getElementById('event').value,
                rating: document.getElementById('rating').value,
                comment: document.getElementById('comment').value
            };
            localStorage.setItem("storeData", JSON.stringify(storeData));
            alert('Data saved successfully!');
        }

        const viewRecords = () => {
            let data = localStorage.getItem('storeData');
            if (data == null) {
                alert('No records available');
            } else {
                window.location.href = "LocalStorage.html";
            }
        }
    </script>
</body>

</html>